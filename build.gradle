group = 'com.tess4j'
version = '1.0'
buildDir = 'target'

buildscript {
	repositories {
		maven {	url "http://dev.mapfish.org/maven/repository" }
		maven { url "http://repo.ghost4j.org/maven2/releases" }
		maven { url 'http://repo.spring.io/snapshot' }
		maven { url 'http://repo.spring.io/milestone' }
		mavenCentral()
	}
	dependencies {
		classpath("org.springframework.boot:spring-boot-gradle-plugin:0.5.0.M4")
	}
}

repositories {
	maven {	url "http://dev.mapfish.org/maven/repository" }
	maven { url "http://repo.ghost4j.org/maven2/releases" }
	maven { url 'http://repo.spring.io/snapshot' }
	maven { url 'http://repo.spring.io/milestone' }
	mavenCentral()
}


// apply plugins
apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'eclipse'
apply plugin: 'eclipse-wtp'
apply plugin: 'maven-publish'
apply plugin: 'spring-boot'




// eclipse wtp context
eclipse{
	wtp {
		component {
			contextPath = 'tess4j'
		}
	}
}

// war manifest information
ext.sharedManifest = manifest {
	attributes(
		'Build-User' : System.properties['user.name'],
		'Build-Time' : new Date().format('yyyy-MMMM-dd HH:mm:ss'),
		'Build-OS' : System.properties['os.name'] + ' - version ' + System.properties['os.version'],
		'Build-Sys' : System.properties['os.arch'],
		'Java-Version' : System.properties['java.version'])
}


// Build WAR file
war {
	archiveName = "tess4j.war"
	manifest = sharedManifest
    destinationDir = file("$buildDir")
}

// versions of dependencies
def logbackVersion = '1.0.13'

dependencies {

	// Servlet Api
	providedCompile "javax.servlet:javax.servlet-api:3.1.0"

	// Java Native Access
	compile "net.java.dev.jna:jna:4.0.0"
	
	// java advance imaging
	compile "javax.media:jai_imageio:1.1"
	
	//Ghost4J binds the Ghostscript C API to bring Ghostscript power to the Java world
	compile "org.ghost4j:ghost4j:0.5.0"
	
	//JSR
	compile "javax.ws.rs:jsr311-api:1.1.1"
	
	// logging
	compile "ch.qos.logback:logback-classic:${logbackVersion}"
	compile "ch.qos.logback:logback-core:${logbackVersion}"
	compile "org.logback-extensions:logback-ext-spring:0.1.1"
	compile "org.slf4j:slf4j-api:1.7.5"
	
	// spring boot
    compile "org.springframework.boot:spring-boot-starter-web:0.5.0.M4"
	compile "org.springframework.boot:spring-boot-starter-actuator:0.5.0.M4"
	compile "org.springframework:spring-context:4.0.0.M3"
	
	//spring data mongodb
	compile "org.springframework.data:spring-data-mongodb:1.3.1.RELEASE"
	
	//rest-assured
	compile "com.jayway.restassured:rest-assured:1.8.1"
	
	//Commons Codec for Base 64 
	compile "commons-codec:commons-codec:1.8"
	
	//Commons IO
	compile "org.apache.commons:commons-io:1.3.2"

	//junit
	testCompile "junit:junit:4.11"
}
